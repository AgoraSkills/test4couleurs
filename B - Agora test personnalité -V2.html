<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test analyse comportementale couleurs</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f5f5f5;
  }
  h1, h2, h3 {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #003366;
  }
  .container {
    max-width: 800px;
    margin: 20px auto;
    padding: 20px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  .section {
    margin-bottom: 20px;
  }
  .section h2 {
    border-bottom: 2px solid #003366;
    padding-bottom: 10px;
  }
  .section p {
    text-align: justify;
    line-height: 1.6;
  }
  #scoreChart {
    display: block;
    margin: 0 auto;
  }
  button {
    font-size: 1.2em;
    padding: 10px 20px;
    background-color: #003366;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  #printReport {
    font-size: 1.2em;
    padding: 10px 20px;
    background-color: #28a745;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  .half-width {
    display: flex;
    justify-content: space-between;
  }
  .half-width .left,
  .half-width .right {
    width: 48%;
  }
  .bold {
    font-weight: bold;
  }
  .page-break {
    page-break-before: always;
  }
  .progress-container {
    width: 100%;
    background-color: #f3f3f3;
    border-radius: 25px;
    margin-bottom: 20px;
    overflow: hidden;
  }
  .progress-bar {
    height: 20px;
    background-color: #003366;
    width: 0;
  }
  #progressText {
    text-align: center;
    margin-top: 10px;
  }
  @media print {
    body {
      margin: 0;
      padding: 0;
    }
    .container {
      margin: 0;
      padding: 20px;
      box-shadow: none;
      background-color: #fff;
    }
    body * {
      visibility: hidden;
    }
    #reportContainer, #reportContainer * {
      visibility: visible;
    }
    #reportContainer {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      padding: 20px;
      box-sizing: border-box;
    }
    .half-width {
      display: flex;
      justify-content: space-between;
      width: 100%;
    }
    .half-width .left,
    .half-width .right {
      width: 48%;
    }
    .page-break {
      page-break-before: always;
    }
  }
</style>
</head>
<body>
<h1>Test Analyse comportementale couleurs</h1>
<!-- Ajouter un formulaire pour saisir les informations de l'utilisateur -->
<form id="userForm" class="container">
  <div class="section">
    <label for="firstName">Prénom:</label>
    <input type="text" id="firstName" name="firstName" required>
  </div>
  <div class="section">
    <label for="lastName">Nom:</label>
    <input type="text" id="lastName" name="lastName" required>
  </div>
  <div class="section">
    <label for="email">Adresse e-mail:</label>
    <input type="email" id="email" name="email" required>
  </div>
  <button type="submit">Commencer le test</button>
</form>
<!-- Div pour afficher les informations de l'utilisateur -->
<div id="userInfo" class="container" style="display:none;">
  <div class="section">
    <h2>Informations Utilisateur</h2>
    <p id="displayFirstName"></p>
    <p id="displayLastName"></p>
    <p id="displayEmail"></p>
  </div>
</div>
<!-- Ajouter une barre de progression -->
<div class="container" id="progressContainer" style="display:none;">
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <p id="progressText"></p>
</div>
<!-- Ajouter une section pour afficher la question -->
<div id="question" class="container" style="width: calc(100vw / 3);"></div>
<!-- Ajouter une liste pour afficher les réponses -->
<ul id="answers" class="container" style="display: flex; flex-wrap: wrap; gap: 10px;">
  <!-- Les réponses seront ajoutées dynamiquement ici -->
</ul>
<!-- Ajouter une section pour afficher le résultat -->
<div id="result" class="container"></div>
<!-- Ajouter un élément canvas pour le diagramme circulaire -->
<canvas id="scoreChart" width="400" height="400"></canvas>

<!-- Rapport généré automatiquement -->
<div class="container" style="display:none;" id="reportContainer">
  <img src="logo.jpg" alt="Logo">
  <div class="section">
    <h1>Rapport d'Analyse Comportementale</h1>
  </div>
  <div class="section half-width">
    <div class="left">
      <h2>Informations Utilisateur</h2>
      <p><span class="bold">Prénom:</span> <span id="reportFirstName"></span></p>
      <p><span class="bold">Nom:</span> <span id="reportLastName"></span></p>
      <p><span class="bold">Email:</span> <span id="reportEmail"></span></p>
    </div>
    <div class="right">
      <canvas id="reportScoreChart"></canvas>
    </div>
  </div>
  <div class="section">
    <h2>Résultat et Couleur Dominante</h2>
    <p><span class="bold">Votre résultat final est :</span> <span id="finalScore"></span></p>
    <p><span class="bold">Votre couleur dominante est :</span> <span id="dominantColor"></span></p>
  </div>
  <div class="section">
    <div id="introductionContent"></div>
  </div>
  <div class="section page-break">
    <h2>Rappel du Résultat Final et Dominante</h2>
    <p><span class="bold">Votre résultat final est :</span> <span id="finalScoreReminder"></span></p>
    <p><span class="bold">Votre couleur dominante est :</span> <span id="dominantColorReminder"></span></p>
  </div>
  <div class="section">
    <h2>Description du Profil Dominant</h2>
    <div id="dominantDescription"></div>
  </div>
  <div class="section">
    <h2>Recommandations</h2>
    <p>Pour améliorer vos interactions et votre performance, voici un lien pour pouvoir suivre notre formation complète sur la méthode 4 couleurs.</p>
  </div>
</div>

<!-- Bouton pour imprimer le rapport en PDF -->
<button id="printReport" style="display:none;">Imprimer ou sauver le Rapport</button>

<script>
 // Tableau contenant toutes les questions et réponses
const questions = [
    {
        question: "Lorsque vous rencontrez quelqu'un pour la première fois, quelle est votre première réaction ?",
        answers: [
            { text: "Vous prenez les devants et vous présentez de manière directe.", score: 1000000 },
            { text: "Vous êtes enthousiaste et vous engagez rapidement la conversation.", score: 10000 },
            { text: "Vous êtes calme et vous laissez l'autre personne prendre l'initiative.", score: 100 },
            { text: "Vous observez attentivement et vous posez des questions pour mieux comprendre.", score: 1 }
        ]
    },
{
        question: "Dans une activité de loisir, quelle est votre approche préférée ?",
        answers: [
            { text: "Vous aimez prendre les choses en main et diriger le groupe.", score: 1000000 },
            { text: "Vous cherchez à créer une ambiance conviviale et impliquer tout le monde.", score: 10000 },
            { text: "Vous préférez suivre les instructions et vous adapter au rythme du groupe.", score: 100 },
            { text: "Vous vous concentrez sur les détails techniques et le respect des règles.", score: 1 }
        ]
    },
    {
        question: "Lorsque vous rencontrez un problème personnel, comment réagissez-vous généralement ?",
        answers: [
            { text: "Vous cherchez rapidement une solution efficace pour le résoudre.", score: 1000000 },
            { text: "Vous en parlez à vos amis pour avoir leur soutien et leurs conseils.", score: 10000 },
            { text: "Vous restez calme et patient, en attendant que la situation se dénoue.", score: 100 },
            { text: "Vous analysez attentivement tous les aspects du problème avant d'agir.", score: 1 }
        ]
    },

   {
        question: "Comment vous définissez vous dans la vie de tous les jours",
        answers: [
            { text: "J'aime relever des défis, il me faut de l'action pour me sentir bien.", score: 1000000 },
            { text: "Avec moi les gens ne s'ennuient jamais, j'aime divertir les autres.", score: 10000 },
            { text: "Je suis plutôt comprehensif, je n'aime pas blesser les autres.", score: 100 },
            { text: "Je suis prudent, je ne donne pas ma confiance facilement.", score: 1 }
        ]
    },
{
    question: "Lorsque vous devez résoudre un désaccord avec un proche, comment réagissez-vous ?",
    answers: [
        { text: "Vous exprimez fermement votre point de vue pour trouver une solution.", score: 1000000 },
        { text: "Vous cherchez à comprendre les perspectives de chacun et à trouver un compromis.", score: 10000 },
        { text: "Vous restez patient et vous essayez d'apaiser la situation.", score: 100 },
        { text: "Vous analysez calmement les différents aspects du problème.", score: 1 }
        ]
    },
{
    question: "Quand vous devez apprendre quelque chose de nouveau, quelle est votre approche ?",
    answers: [
        { text: "Vous voulez rapidement passer à l'action et mettre en pratique.", score: 1000000 },
        { text: "Vous aimez échanger avec les autres et être stimulé par leurs idées.", score: 10000 },
        { text: "Vous prenez le temps d'assimiler les informations de manière progressive.", score: 100 },
        { text: "Vous vous concentrez sur la compréhension détaillée de la matière.", score: 1 }
        ]
    },
{
    question: "Lorsque vous devez résoudre un problème, quelle est votre première étape ?",
    answers: [
        { text: "Vous identifiez rapidement les actions à entreprendre.", score: 1000000 },
        { text: "Vous cherchez à impliquer les autres pour avoir leur avis.", score: 10000 },
        { text: "Vous prenez le temps d'examiner calmement la situation.", score: 100 },
        { text: "Vous rassemblez le plus d'informations possible.", score: 1 }
        ]
    },
{
    question: "Quand vous devez faire face à un changement inattendu, comment réagissez-vous ?",
    answers: [
        { text: "Vous saisissez l'opportunité et vous vous adaptez rapidement.", score: 1000000 },
        { text: "Vous accueillez le changement avec enthousiasme et créativité.", score: 10000 },
        { text: "Vous cherchez à maintenir la stabilité et la sécurité.", score: 100 },
        { text: "Vous analysez attentivement les implications avant de vous engager.", score: 1 }
    ]
},
{
    question: "Lorsque vous devez donner votre opinion sur un sujet, quelle est votre approche ?",
    answers: [
        { text: "Vous exprimez clairement votre point de vue sans détour.", score: 1000000 },
        { text: "Vous partagez vos idées de manière animée et engageante.", score: 10000 },
        { text: "Vous écoutez attentivement les autres avant de vous prononcer.", score: 100 },
        { text: "Vous apportez des arguments détaillés et factuels.", score: 1 }
    ]
},
{
    question: "Quand vous devez planifier une activité, quelle est votre priorité ?",
    answers: [
        { text: "Vous voulez définir des objectifs ambitieux et les atteindre.", score: 1000000 },
        { text: "Vous cherchez à impliquer les participants et à créer une dynamique positive.", score: 10000 },
        { text: "Vous voulez que l'activité se déroule de manière fluide et agréable.", score: 100 },
        { text: "Vous voulez vous assurer que tous les détails sont pris en compte.", score: 1 }
    ]
},
{
    question: "Comment vous comportez-vous quand vous êtes malade ?",
    answers: [
        { text: "Je continue mes activités sans rien changer. Je n'ai pas de temps à perdre !", score: 1000000 },
        { text: "Je m'ennuie déjà à l'idée de rester seul à la maison sans rien faire.", score: 10000 },
        { text: "Je ne veux pas contaminer mes collègues alors je reste à la maison pour me reposer.", score: 100 },
        { text: "Je vais chez le médecin et je suis sa prescription et ses conseils à la lettre.", score: 1 }
    ]
},
{
    question: "Quand vous devez communiquer avec quelqu'un, quelle est votre approche ?",
    answers: [
        { text: "Vous allez droit au but et vous vous exprimez de manière directe.", score: 1000000 },
        { text: "Vous cherchez à créer une connexion et à être enthousiaste.", score: 10000 },
        { text: "Vous êtes à l'écoute et vous vous adaptez au style de l'autre.", score: 100 },
        { text: "Vous fournissez des informations précises et structurées.", score: 1 }
    ]
},
{
    question: "Quelle est votre plus belle qualité ?",
    answers: [
        { text: "La détermination : Je sais atteindre mes objectifs", score: 1000000 },
        { text: "La sociabilité : J'ai le contact facile avec tout le monde", score: 10000 },
        { text: "L'altruisme : Je sais rendre service", score: 100 },
        { text: "La fiabilité : Je suis méticuleux et ponctuel", score: 1 }
    ]
},
{
    question: "Comment êtes-vous quand vous cuisinez en famille ?",
    answers: [
        { text: "Je file acheter tous les ingrédients et un maximum de plats préparés", score: 1000000 },
        { text: "Je mets le bazar dans la cuisine mais j'adore cuisiner !", score: 10000 },
        { text: "Je ne ménage pas mes efforts pour que tout le monde se régale", score: 100 },
        { text: "Je m'assure d'avoir tous les ingrédients et je suis la recette", score: 1 }
    ]
},
{
    question: "Vous êtes invité à une soirée entre amis, comment vous comportez-vous idéalement ?",
    answers: [
        { text: "Vous prenez les devants pour organiser les activités et vous assurez que tout se passe bien.", score: 1000000 },
        { text: "Vous êtes la vie de la fête, vous animez les discussions et vous créez une ambiance chaleureuse.", score: 10000 },
        { text: "Vous vous fondez dans le groupe, vous écoutez attentivement et vous apportez votre soutien.", score: 100 },
        { text: "Vous vous concentrez sur les détails de l'organisation, vous vous assurez que les règles sont respectées.", score: 1 }
    ]
},
{
    question: "Vous découvrez une nouvelle activité passionnante, comment réagissez-vous ?",
    answers: [
        { text: "Vous vous lancez sans hésiter, prêt à relever le défi et à dominer la situation.", score: 1000000 },
        { text: "Vous en parlez à vos amis avec enthousiasme, vous les encouragez à essayer avec vous.", score: 10000 },
        { text: "Vous prenez le temps d'observer et de vous familiariser progressivement avec l'activité.", score: 100 },
        { text: "Vous vous renseignez en détail sur les techniques et les procédures avant de vous lancer.", score: 1 }
    ]
},
{
    question: "Vous devez organiser une surprise pour l'anniversaire d'un proche, comment procédez-vous ?",
    answers: [
        { text: "Vous prenez les choses en main, vous fixez un plan d'action et vous le suivez avec détermination.", score: 1000000 },
        { text: "Vous impliquez vos amis, vous créez une dynamique de groupe enthousiaste et créative.", score: 10000 },
        { text: "Vous vous assurez que tout le monde se sente à l'aise et que l'ambiance soit chaleureuse.", score: 100 },
        { text: "Vous planifiez méticuleusement tous les détails logistiques pour que tout se déroule sans accroc.", score: 1 }
    ]
},
{
    question: "Vous avez une journée de congé, comment choisissez-vous de la passer ?",
    answers: [
        { text: "Vous saisissez l'opportunité pour relever un défi personnel ou poursuivre un objectif ambitieux.", score: 1000000 },
        { text: "Vous passez du temps avec vos proches, vous partagez des moments de joie et de connexion.", score: 10000 },
        { text: "Vous profitez d'un environnement familier et rassurant, vous vous détendez et vous vous ressourcez.", score: 100 },
        { text: "Vous vous consacrez à une activité enrichissante qui vous permet d'approfondir vos connaissances.", score: 1 }
    ]
},
{
    question: "Vous devez résoudre un conflit avec un membre de votre famille, comment réagissez-vous ?",
    answers: [
        { text: "Vous exprimez fermement votre point de vue et vous cherchez une solution rapide.", score: 1000000 },
        { text: "Vous écoutez attentivement les différentes perspectives et vous cherchez un compromis.", score: 10000 },
        { text: "Vous restez patient et vous essayez d'apaiser la situation pour préserver l'harmonie.", score: 100 },
        { text: "Vous analysez calmement tous les aspects du problème avant de prendre une décision.", score: 1 }
    ]
},
{
    question: "Vous découvrez qu'un de vos amis a remporté un prix prestigieux, comment réagissez-vous ?",
    answers: [
        { text: "Vous le félicitez chaleureusement et vous l'encouragez à poursuivre ses ambitions.", score: 10000 },
        { text: "Vous analysez en détail les raisons de son succès et vous cherchez à comprendre le processus.", score: 1 },
        { text: "Vous vous réjouissez sincèrement pour lui et vous vous concentrez sur son bien-être.", score: 100 },
        { text: "Vous vous demandez comment vous pourriez également remporter un prix similaire.", score: 1000000 }
    ]
},
{
    question: "Vous devez organiser une soirée jeux de société entre amis, comment vous y prenez-vous ?",
    answers: [
        { text: "Vous choisissez des jeux stimulants qui vont pousser les participants à se surpasser.", score: 1000000 },
        { text: "Vous sélectionnez des jeux conviviaux qui vont favoriser les interactions et les rires.", score: 10000 },
        { text: "Vous optez pour des jeux classiques et familiers qui vont créer une ambiance chaleureuse.", score: 100 },
        { text: "Vous vous assurez que les règles et les procédures de chaque jeu soient bien comprises.", score: 1 }
    ]
},
{
    question: "Face à une situation totalement nouvelle vous êtes ...?",
    answers: [
        { text: "Aventureux, j'aime relever des défis !", score: 1000000 },
        { text: "Ouvert aux suggestions et idées des autres", score: 10000 },
        { text: "Chaleureux envers les nouvelles personnes rencontrées", score: 100 },
        { text: "Modéré. J'évite les extrèmes et je respecte les conventions", score: 1 }
    ]
},
{
    question: "Vous devez choisir une activité de loisir à faire en famille, comment procédez-vous ?",
    answers: [
        { text: "Vous proposez une activité stimulante et compétitive qui va dynamiser tout le monde.", score: 1000000 },
        { text: "Vous choisissez une activité amusante et interactive qui va favoriser les moments de partage.", score: 10000 },
        { text: "Vous optez pour une activité familière et rassurante qui va permettre à chacun de se sentir à l'aise.", score: 100 },
        { text: "Vous sélectionnez une activité qui vous permettra d'approfondir vos connaissances et vos compétences.", score: 1 }
    ]
},
{
    question: "Vous devez prendre une décision importante concernant votre avenir, comment procédez-vous ?",
    answers: [
        { text: "Vous analysez rapidement les différentes options et vous choisissez la plus prometteuse.", score: 1000000 },
        { text: "Vous en discutez longuement avec vos proches pour avoir leur avis et leur soutien.", score: 10000 },
        { text: "Vous prenez le temps d'y réfléchir calmement pour trouver la solution la plus adaptée.", score: 100 },
        { text: "Vous rassemblez le plus d'informations possible avant de vous prononcer.", score: 1 }
    ]
},
{
    question: "Vous découvrez qu'un de vos proches a des difficultés personnelles, comment réagissez-vous ?",
    answers: [
        { text: "Vous cherchez rapidement des solutions concrètes pour l'aider à surmonter ses problèmes.", score: 1000000 },
        { text: "Vous l'écoutez avec empathie et vous l'encouragez à s'exprimer ouvertement sur ce qu'il traverse.", score: 10000 },
        { text: "Vous restez à ses côtés avec patience et vous faites de votre mieux pour le réconforter.", score: 100 },
        { text: "Vous l'aidez à analyser calmement la situation afin de trouver la meilleure approche.", score: 1 }
    ]
},
{
    question: "Vous découvrez qu'un de vos amis a traversé une période difficile, comment réagissez-vous ?",
    answers: [
        { text: "Vous l'encouragez à prendre les choses en main et à trouver rapidement des solutions.", score: 1000000 },
        { text: "Vous l'écoutez attentivement, vous le soutenez émotionnellement et vous l'aidez à se sentir mieux.", score: 10000 },
        { text: "Vous restez à ses côtés avec patience et vous faites de votre mieux pour le réconforter.", score: 100 },
        { text: "Vous l'aidez à analyser calmement la situation afin de trouver la meilleure approche.", score: 1 }
    ]
},
{
    question: "Vous devez organiser une soirée jeux de rôle entre amis, comment vous y prenez-vous ?",
    answers: [
        { text: "Vous choisissez des jeux qui vont permettre à chacun de se surpasser et de se démarquer.", score: 1000000 },
        { text: "Vous sélectionnez des jeux qui vont favoriser l'interaction, la créativité et l'amusement.", score: 10000 },
        { text: "Vous optez pour des jeux classiques et familiers qui vont créer une ambiance chaleureuse.", score: 100 },
        { text: "Vous vous assurez que les règles et les procédures de chaque jeu soient bien comprises.", score: 1 }
    ]
},
{
    question: "Vous vous promenez dans un parc et vous trouvez un portefeuille oublié. Que faites-vous ?",
    answers: [
        { text: "Pas de temps à perdre, je file au poste de police pour le rapporter immédiatement !", score: 1000000 },
        { text: "Trop cool, je vais pouvoir faire la fête avec les amis ce soir grâce à cet argent !", score: 10000 },
        { text: "Pas de problème, je vais le garder en lieu sûr jusqu'à ce que son propriétaire vienne le récupérer.", score: 100 },
        { text: "Commençons par examiner le contenu du portefeuille pour identifier son propriétaire en détail.", score: 1 }
    ]
},
{
    question: "Vous découvrez qu'un de vos amis a décidé de changer de carrière. Quelle est votre réaction ?",
    answers: [
        { text: "Intéressant, je me demande comment je pourrais faire pour saisir une opportunité similaire.", score: 1000000 },
        { text: "Trop cool, je suis sûr que tu vas pouvoir t'épanouir dans cette nouvelle voie ! Raconte-moi tout !", score: 10000 },
        { text: "Je suis heureux pour toi, j'espère que tu trouveras la stabilité et l'équilibre que tu recherches.", score: 100 },
        { text: "C'est une décision importante, j'aimerais en savoir plus sur tes réflexions et ton plan d'action.", score: 1 }
    ]
},
{
    question: "Vous recevez une invitation pour une soirée karaoké entre amis. Comment répondez-vous ?",
    answers: [
        { text: "Parfait, je vais pouvoir montrer à tout le monde mes talents de chanteur hors pair !", score: 1000000 },
        { text: "Trop cool, on va pouvoir s'éclater et créer une ambiance de folie sur les chansons !", score: 10000 },
        { text: "Génial, j'espère qu'on pourra choisir des classiques que tout le monde connaît pour chanter ensemble.", score: 100 },
        { text: "Intéressant, j'aimerais savoir quels sont les critères de notation pour le concours de karaoké.", score: 1 }
    ]
},
{
    question: "Vous avez rendez-vous et votre réveil n'a pas sonné ce matin !!!",
    answers: [
        { text: "Rien de tel pour me mettre de mauvaise humeur pour le reste de la journée !", score: 1000000 },
        { text: "Tant pis ! Tant qu'à être en retard, j'en profite pour trainer encore un peu...", score: 10000 },
        { text: "Je suis en panique ! Je me précipite mon téléphone pour informer de mon retard", score: 100 },
        { text: "J'ai horreur d'être en retard. Je réorganise tout mes rendez-vous de la journée !", score: 1 }
    ]
}
];

  let currentQuestionIndex = 0;
  let score = 0;
  let selectedAnswer = null; // Réponse sélectionnée par l'utilisateur

  // Fonction pour mélanger les questions
  function shuffleQuestions() {
    questions.sort(() => Math.random() - 0.5);
  }

  // Fonction pour afficher la question suivante
  function showNextQuestion() {
    const questionElement = document.getElementById('question');
    const answersElement = document.getElementById('answers');
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');

    // Vérifier s'il reste des questions
    if (currentQuestionIndex >= questions.length) {
      showResult();
      return;
    }

    const currentQuestion = questions[currentQuestionIndex];
    // Vider les éléments HTML
    questionElement.innerHTML = '';
    answersElement.innerHTML = '';

    // Mettre à jour la barre de progression et le texte
    const progressPercentage = ((currentQuestionIndex + 1) / questions.length) * 100;
    progressBar.style.width = progressPercentage + '%';
    progressText.textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;

    // Ajouter le texte de la question
    questionElement.textContent = currentQuestion.question;

    // Afficher les réponses
    currentQuestion.answers.forEach(answer => {
      const li = document.createElement('li');
      li.textContent = answer.text;
      // Ajouter un événement de clic pour sélectionner la réponse
      li.addEventListener('click', () => selectAnswer(answer));
      // Si cette réponse est la réponse sélectionnée, la mettre en gras et italique
      if (selectedAnswer === answer) {
        li.style.fontWeight = 'bold';
        li.style.fontStyle = 'italic';
      }
      answersElement.appendChild(li);
    });

    // Ajouter un bouton de validation si une réponse est sélectionnée
    if (selectedAnswer) {
      const validationButton = document.createElement('button');
      validationButton.textContent = 'Valider';
      validationButton.style.fontSize = '1.2em'; // Agrandir le bouton de validation
      validationButton.addEventListener('click', () => {
        score += selectedAnswer.score;
        selectedAnswer = null; // Réinitialiser la réponse sélectionnée
        currentQuestionIndex++; // Passer à la question suivante
        showNextQuestion(); // Afficher la prochaine question
      });
      answersElement.appendChild(validationButton);
    }
  }

  // Fonction pour sélectionner une réponse
  function selectAnswer(answer) {
    // Réinitialiser tous les styles
    const answers = document.querySelectorAll('#answers li');
    answers.forEach(li => {
      li.style.fontWeight = 'normal';
      li.style.fontStyle = 'normal';
    });
    // Mettre en gras et italique la réponse sélectionnée
    selectedAnswer = answer;
    showNextQuestion(); // Réafficher les réponses avec la nouvelle sélection
  }

  // Fonction pour afficher le résultat final
  function showResult() {
    const questionElement = document.getElementById('question');
    const answersElement = document.getElementById('answers');
    const resultElement = document.getElementById('result');
    const reportContainer = document.getElementById('reportContainer');
    const printButton = document.getElementById('printReport');

    // Cacher les containers de question et de réponses
    questionElement.style.display = 'none';
    answersElement.style.display = 'none';
    document.getElementById('progressContainer').style.display = 'none';

    // Formatage du score final
    const formattedScore = formatScore(score);

    // Calculer les scores après que toutes les questions ont été répondues
    const scores = calculateScores(score);
    const dominant = calculateDominant(scores); // Calculer la dominante

    // Afficher le rapport
    displayReport(formattedScore, scores, dominant);

    // Afficher le graphique et les scores
    showScoreChart(scores);

    // Afficher le bouton d'impression
    printButton.style.display = 'block';
  }

  // Fonction pour formater le score
  function formatScore(score) {
    const formattedScore = score.toString().padStart(8, '0'); // Ajoute des zéros devant si nécessaire
    return formattedScore.replace(/(\d{2})(?=\d{2}|$)/g, '$1 '); // Ajoute des espaces tous les deux chiffres
  }

  // Fonction pour calculer les scores rouge, jaune, vert et bleu
  function calculateScores(score) {
    const rouge = Math.floor(score / 1000000);
    const jaune = Math.floor(score / 10000) - 100 * rouge;
    const vert = Math.floor(score / 100) - 10000 * rouge - 100 * jaune;
    const bleu = score - 1000000 * rouge - 10000 * jaune - 100 * vert;
    return [rouge, jaune, vert, bleu];
  }

  // Fonction pour calculer la dominante
  function calculateDominant(scores) {
    const maxScore = Math.max(...scores);
    const dominantIndex = scores.indexOf(maxScore);
    const dominants = ['Rouge', 'Jaune', 'Vert', 'Bleu'];
    return dominants[dominantIndex];
  }

  // Fonction pour afficher le graphique circulaire avec les proportions de chaque score
  function showScoreChart(scores) {
    const labels = ['Rouge', 'Jaune', 'Vert', 'Bleu'];
    const colors = ['red', 'yellow', 'green', 'blue'];
    const ctx = document.getElementById('reportScoreChart').getContext('2d');
    const myChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: labels,
        datasets: [{
          data: scores,
          backgroundColor: colors
        }]
      },
      options: {
        responsive: false,
        legend: {
          display: false
        }
      }
    });
  }

  // Fonction pour afficher le rapport complet
  function displayReport(formattedScore, scores, dominant) {
    const reportContainer = document.getElementById('reportContainer');
    const firstName = document.getElementById('firstName').value;
    const lastName = document.getElementById('lastName').value;
    const email = document.getElementById('email').value;

    document.getElementById('reportFirstName').textContent = firstName;
    document.getElementById('reportLastName').textContent = lastName;
    document.getElementById('reportEmail').textContent = email;
    document.getElementById('finalScore').textContent = formattedScore;
    document.getElementById('dominantColor').textContent = dominant;
    document.getElementById('finalScoreReminder').textContent = formattedScore;
    document.getElementById('dominantColorReminder').textContent = dominant;

    fetchDescription(dominant);

    reportContainer.style.display = 'block'; // Afficher le rapport

    // Cacher tous les éléments sauf le rapport
    const bodyChildren = document.body.children;
    for (let i = 0; i < bodyChildren.length; i++) {
      if (bodyChildren[i].id !== 'reportContainer' && bodyChildren[i].id !== 'printReport') {
        bodyChildren[i].style.display = 'none';
      }
    }
  }

  // Fonction pour récupérer la description du profil dominant à partir des fichiers texte locaux
  function fetchDescription(color) {
    const descriptions = {
      'Rouge': 'drouge.txt',
      'Jaune': 'djaune.txt',
      'Vert': 'dvert.txt',
      'Bleu': 'dbleu.txt'
    };
    const descriptionFile = descriptions[color];

    fetch(descriptionFile)
      .then(response => response.text())
      .then(data => {
        document.getElementById('dominantDescription').innerHTML = marked.parse(data);
      })
      .catch(error => {
        console.error('Erreur lors de la récupération de la description:', error);
      });
  }

  // Fonction pour afficher l'introduction formatée en Markdown
  function fetchIntroduction() {
    const introductionMarkdown = `

<div class="page-break"></div>

## La Méthode des 4 Couleurs : Une Clé pour Déverrouiller le Potentiel Humain

Dans le vaste monde des interactions humaines, la méthode des 4 couleurs se démarque comme un outil puissant et polyvalent. Bien au-delà d'une simple catégorisation, cette approche offre une compréhension profonde des comportements, des motivations et des préférences individuelles, ouvrant ainsi la voie à une communication plus efficace et à des relations plus harmonieuses.

# Les Principes Fondamentaux

Au cœur de cette méthode se trouve la reconnaissance que chaque individu possède un ensemble unique de traits de personnalité, de valeurs et de styles de communication. En attribuant une couleur distinctive à chaque profil, la méthode des 4 couleurs crée un langage commun qui facilite la compréhension mutuelle et l'appréciation des différences.

Loin d'être une simple étiquette, chaque couleur représente un spectre riche de caractéristiques comportementales, offrant ainsi une perspective nuancée sur les forces, les défis et les préférences de chacun. Cette approche encourage l'empathie, la tolérance et la valorisation de la diversité, éléments essentiels pour construire des relations saines et productives.

# Des Applications Variées

La beauté de la méthode des 4 couleurs réside dans sa polyvalence. Elle trouve son application dans divers domaines, allant du développement personnel à la gestion d'équipe, en passant par le coaching, la vente et même les relations interpersonnelles.

Dans le milieu professionnel, cette méthode permet aux équipes de mieux comprendre les forces et les défis de chacun, favorisant ainsi une collaboration plus efficace et une synergie accrue. Les gestionnaires peuvent l'utiliser pour adapter leur style de leadership et maximiser le potentiel de leurs employés.

Dans le domaine du développement personnel, la méthode des 4 couleurs offre un tremplin pour l'introspection et la croissance. En explorant leur profil unique, les individus peuvent acquérir une meilleure compréhension d'eux-mêmes, de leurs motivations et de leurs zones de confort, leur permettant ainsi de se développer de manière plus ciblée.

# Un Voyage Vers l'Harmonie

Que vous soyez un professionnel cherchant à optimiser les performances de votre équipe, un coach désireux d'aider vos clients à atteindre leur plein potentiel, ou simplement quelqu'un qui souhaite approfondir sa compréhension des relations humaines, la méthode des 4 couleurs offre un cadre riche et accessible.

En embrassant cette approche, vous ouvrez la porte à un monde de possibilités, où la communication devient plus fluide, les relations plus profondes et les objectifs plus facilement atteignables. C'est un voyage vers l'harmonie, où chaque couleur apporte sa propre nuance à la tapisserie vibrante de l'expérience humaine.
`;

    document.getElementById('introductionContent').innerHTML = marked.parse(introductionMarkdown);
  }

  // Appel de la fonction fetchIntroduction pour charger l'introduction formatée en Markdown
  fetchIntroduction();

  // Fonction pour imprimer le rapport
  function printReport() {
    window.print();
  }

  // Ajouter un écouteur d'événement au bouton d'impression
  document.getElementById('printReport').addEventListener('click', printReport);

  // Écouteur d'événement pour le formulaire utilisateur
  const userForm = document.getElementById('userForm');
  userForm.addEventListener('submit', (event) => {
    event.preventDefault(); // Empêcher le formulaire de se soumettre

    // Récupérer les valeurs du formulaire
    const firstName = document.getElementById('firstName').value;
    const lastName = document.getElementById('lastName').value;
    const email = document.getElementById('email').value;

    // Afficher les informations de l'utilisateur
    document.getElementById('displayFirstName').textContent = `Prénom: ${firstName}`;
    document.getElementById('displayLastName').textContent = `Nom: ${lastName}`;
    document.getElementById('displayEmail').textContent = `Email: ${email}`;

    // Afficher les informations de l'utilisateur
    document.getElementById('userInfo').style.display = 'block';
    // Afficher la barre de progression
    document.getElementById('progressContainer').style.display = 'block';
    // Cacher le formulaire
    userForm.style.display = 'none';
    // Démarrer le quiz
    shuffleQuestions(); // Mélanger les questions avant de commencer
    showNextQuestion(); // Afficher la première question
  });
</script>
</body>
</html>
